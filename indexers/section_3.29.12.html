<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pulse Width Modulation Controller (PWM) | Microchip Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            overflow: hidden;
            width: 280px;
        }

        .nav-frame {
            width: 100%;
            height: 100%;
            border: none;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .main {
            margin-left: 280px;
            padding: 20px;
        }

        .nav-link {
            color: #333;
            padding: .5rem 1rem;
        }

        .nav-link.active {
            background-color: #f8f9fa;
            font-weight: 500;
        }

        .parameters-table {
            width: 100%;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="sidebar">
                <iframe class="nav-frame" src="navigation.html" title="Navigation"></iframe>
            </nav>
            <main class="main">
<div class="doc-navigation">
    <a href="section_3.29.html">↑ Up to Section</a><br />
    <a href="index.html">↑↑ Back to Main Documentation</a>
</div>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="section_3.html">Device Families</a></li>
        <li class="breadcrumb-item"><a href="section_3.29.html">SAM 9X7 Peripheral Libraries</a></li>
        <li class="breadcrumb-item active" aria-current="page">Pulse Width Modulation Controller (PWM)</li>
    </ol>
</nav>

<h1>Pulse Width Modulation Controller (PWM)</h1>
<h1>3.29.12</h1>
<p>Pulse Width Modulation Controller (PWM)</p>
<p><em>Generated on: 2025-02-19 08:42:44</em></p>
<p>Source: <a href="https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-4E7A55B7-E124-44E4-B51F-6DAA8E057A73_2.html">https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-4E7A55B7-E124-44E4-B51F-6DAA8E057A73_2.html</a></p>
<h1>3.29.12 Pulse Width Modulation Controller (PWM)</h1>
<p>The Pulse Width Modulation Controller (PWM) controls several channels independently. Each channel controls one square output waveform. Characteristics of the output waveform such as period, duty-cycle and polarity are configurable through the user interface. Each channel selects and uses one of the clocks provided by the clock generator. The clock generator provides several clocks resulting from the division of the PWM macrocell master clock. Channels can be synchronized, to generate non overlapped waveforms. All channels integrate a double buffering system in order to prevent an unexpected output waveform while modifying the period or the duty-cycle.</p>
<h2>Using The Library</h2>
<p>This example shows how to configure the PWM to generate three PWM waveform signals. The duty cycle of the PWM is updated in the interrupt handler.</p>
<p>```C
/<em> Duty cycle increment value </em>/</p>
<h1>define DUTY_INCREMENT (10U)</h1>
<p>/<em> Save PWM period </em>/
uint32_t period;</p>
<p>/<em> This function is called after PWM0 counter event </em>/
void PWM_CounterEventHandler(uintptr_t context)
{
    static uint32_t duty0 = 0U;
    static uint32_t duty1 = 2500U;
    static uint32_t duty2 = 5000U;</p>
<pre class="code-block"><code class="language-c">PWM0_ChannelDutySet(PWM_CHANNEL_0, duty0);
PWM0_ChannelDutySet(PWM_CHANNEL_1, duty1);
PWM0_ChannelDutySet(PWM_CHANNEL_2, duty2);

/* Increment duty cycle values */
duty0 += DUTY_INCREMENT;
duty1 += DUTY_INCREMENT;
duty2 += DUTY_INCREMENT;

if (duty0 &gt; period)
    duty0 = 0U;
if (duty1 &gt; period)
    duty1 = 0U;
if (duty2 &gt; period)
    duty2 = 0U;
</code></pre>
<p>}</p>
<p>int main ( void )
{
    /<em> Register callback function for Channel 0 counter event </em>/
    PWM0_CallbackRegister(PWM_CounterEventHandler, (uintptr_t)NULL);</p>
<pre class="code-block"><code class="language-c">/* Read the period */
period = PWM0_ChannelPeriodGet(PWM_CHANNEL_0);

/* Start all channels synchronously */
PWM0_ChannelsStart(PWM_CHANNEL_0_MASK | PWM_CHANNEL_1_MASK | PWM_CHANNEL_2_MASK);
</code></pre>
<p>}
```</p>
<h2>Library Interface</h2>
<p>Pulse Width Modulation Controller peripheral library provides the following interfaces:</p>
<p>Functions</p>
<p>Data types and constants</p>
<table class="data-table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>PWMx_Initialize</td>
<td>Initializes given instance of PWM peripheral</td>
</tr>
<tr>
<td>PWMx_ChannelsStart</td>
<td>Starts the given PWM channels</td>
</tr>
<tr>
<td>PWMx_ChannelsStop</td>
<td>Stops the given PWM channels</td>
</tr>
<tr>
<td>PWMx_ChannelPeriodSet</td>
<td>Sets the period value of given PWM channel</td>
</tr>
<tr>
<td>PWMx_ChannelPeriodGet</td>
<td>Reads the period value of given PWM channel</td>
</tr>
<tr>
<td>PWMx_ChannelDutySet</td>
<td>Writes the duty cycle value of given PWM channel</td>
</tr>
<tr>
<td>PWMx_ChannelCounterEventEnable</td>
<td>Enables counter event of given channels</td>
</tr>
<tr>
<td>PWMx_ChannelCounterEventDisable</td>
<td>Disables counter event of given channels</td>
</tr>
<tr>
<td>PWMx_ChannelCounterEventStatusGet</td>
<td>Disables counter event of given channels</td>
</tr>
<tr>
<td>PWMx_CallbackRegister</td>
<td>Registers the function to be called from interrupt</td>
</tr>
</tbody>
</table>
<table class="data-table">
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>PWM_CALLBACK</td>
<td>Typedef</td>
<td>Defines the data type and function signature for the PWM peripheral callback function</td>
</tr>
<tr>
<td>PWM_CHANNEL_NUM</td>
<td>Enum</td>
<td>Identifies PWM channel number in a PWM peripheral</td>
</tr>
<tr>
<td>PWM_CHANNEL_MASK</td>
<td>Enum</td>
<td>Identifies PWM channel mask</td>
</tr>
</tbody>
</table>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>