<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QSPIx WriteRead Function | Microchip Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            overflow: hidden;
            width: 280px;
        }

        .nav-frame {
            width: 100%;
            height: 100%;
            border: none;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .main {
            margin-left: 280px;
            padding: 20px;
        }

        .nav-link {
            color: #333;
            padding: .5rem 1rem;
        }

        .nav-link.active {
            background-color: #f8f9fa;
            font-weight: 500;
        }

        .parameters-table {
            width: 100%;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="sidebar">
                <iframe class="nav-frame" src="navigation.html" title="Navigation"></iframe>
            </nav>
            <main class="main">
<div class="doc-navigation">
    <a href="section_2.87.html">↑ Up to Section</a><br />
    <a href="index.html">↑↑ Back to Main Documentation</a>
</div>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="section_2.html">API Documentation</a></li>
        <li class="breadcrumb-item"><a href="section_2.87.html">Quad Serial Peripheral Interface (QSPI)</a></li>
        <li class="breadcrumb-item active" aria-current="page">QSPIx WriteRead Function</li>
    </ol>
</nav>

<h1>QSPIx WriteRead Function</h1>
<h1>2.87.8</h1>
<p>QSPIx_WriteRead Function</p>
<p><em>Generated on: 2025-02-20 07:44:04</em></p>
<p>Source: <a href="https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-EE360E44-81F0-43FB-929A-4C8E47C357A2.html">https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-EE360E44-81F0-43FB-929A-4C8E47C357A2.html</a></p>
<h1><span id="2-87-8-qspix-writeread-function"></span>2.87.8 QSPIx_WriteRead Function</h1>
<h2><span id="c"></span>C</h2>
<p>```C
// x - Instance of the QSPI peripheral</p>
<p>bool QSPIx_WriteRead
(
void<em> pTransmitData,
size_t txSize,
void</em> pReceiveData,
size_t rxSize
);
```</p>
<h2><span id="summary"></span>Summary</h2>
<p>Write and Read data on QSPI peripheral. This is used in SPI mode only.</p>
<h2><span id="description"></span>Description</h2>
<p>This function should be used to write "txSize" number of bytes and read "rxSize" number of bytes on QSPI module. Data pointed by pTransmitData is transmitted and received data is saved in the location pointed by pReceiveData.</p>
<h2><span id="precondition"></span>Precondition</h2>
<p>The QSPIx_Initialize function must have been called.  Callback has to be registered using QSPIx_CallbackRegister API if the peripheral instance has been configured in Interrupt mode and transfer completion status needs to be communicated back to application via callback.</p>
<h2><span id="parameters"></span>Parameters</h2>
<h3>Parameters</h3>
<table class="data-table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*pTransmitData</td>
<td>Pointer to the data which has to be transmitted. if it isNULL, that means only data receiving is expected. For 9 to 15bit mode, data should be right aligned in the 16 bit memory location.</td>
</tr>
<tr>
<td>txSize</td>
<td>Number of bytes to be transmitted. Always, size should begiven in terms of bytes. For example, if 5 16-bit data are to be transmitted, the transmit size should be 10 bytes.</td>
</tr>
<tr>
<td>*pReceiveData</td>
<td>Pointer to the location where received data has to be stored.It is user's responsibility to ensure pointed location has sufficient memory to store the read data. if it is NULL, that means only data transmission is expected. For 9 to 15bit mode, received data will be right aligned in the 16 bit memory location.</td>
</tr>
<tr>
<td>rxSize</td>
<td>Number of bytes to be received. Always, size should begiven in terms of bytes. For example, if 5 16-bit data are to be received, the receive size should be 10 bytes. if "n" number of bytes has to be received AFTER transmitting "m" number of bytes, then "rxSize" should be set as "m+n".</td>
</tr>
</tbody>
</table>
<table class="data-table">
<thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*pTransmitData</td>
<td>Pointer to the data which has to be transmitted. if it isNULL, that means only data receiving is expected. For 9 to 15bit mode, data should be right aligned in the 16 bit memory location.</td>
</tr>
<tr>
<td>txSize</td>
<td>Number of bytes to be transmitted. Always, size should begiven in terms of bytes. For example, if 5 16-bit data are to be transmitted, the transmit size should be 10 bytes.</td>
</tr>
<tr>
<td>*pReceiveData</td>
<td>Pointer to the location where received data has to be stored.It is user's responsibility to ensure pointed location has sufficient memory to store the read data. if it is NULL, that means only data transmission is expected. For 9 to 15bit mode, received data will be right aligned in the 16 bit memory location.</td>
</tr>
<tr>
<td>rxSize</td>
<td>Number of bytes to be received. Always, size should begiven in terms of bytes. For example, if 5 16-bit data are to be received, the receive size should be 10 bytes. if "n" number of bytes has to be received AFTER transmitting "m" number of bytes, then "rxSize" should be set as "m+n".</td>
</tr>
</tbody>
</table>
<h2><span id="returns"></span>Returns</h2>
<p>In Blocking mode:</p>
<p>API returns True once the transfer is complete. It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.</p>
<p>In interrupt mode:</p>
<p>If previous buffer request is not completed and a new transfer request comes, then this API will reject the new request and will return "False".</p>
<p>Also, Same as blocking mode, It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.</p>
<ul>
<li>
<p>In Blocking mode:</p>
<pre class="code-block"><code class="language-c">      API returns True once the transfer is complete. It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.
</code></pre>
<ul>
<li>API returns True once the transfer is complete. It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.</li>
<li>In interrupt mode:<pre class="code-block"><code class="language-c">  If previous buffer request is not completed and a new transfer request comes, then this API will reject the new request and will return "False".

  Also, Same as blocking mode, It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.
</code></pre>
<ul>
<li>If previous buffer request is not completed and a new transfer request comes, then this API will reject the new request and will return "False".</li>
<li>Also, Same as blocking mode, It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>API returns True once the transfer is complete. It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.</p>
</li>
<li>
<p>If previous buffer request is not completed and a new transfer request comes, then this API will reject the new request and will return "False".</p>
</li>
<li>Also, Same as blocking mode, It returns False if either of the size parameters are 0 and corresponding data pointer is NULL.</li>
</ul>
<h2><span id="example"></span>Example</h2>
<p>```C
uint8_t txBuffer[4];
uint8_t rxBuffer[10];
size_t txSize = 4;
size_t rxSize = 10;
bool reqAccepted;</p>
<p>reqAccepted = QSPI0_WriteRead(&amp;txBuffer, txSize, &amp;rxBuffer, rxSize);
```</p>
<h2><span id="remarks"></span>Remarks</h2>
<p>Non-blocking interrupt mode configuration implementation of this function will be used by Harmony driver implementation APIs.</p>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>