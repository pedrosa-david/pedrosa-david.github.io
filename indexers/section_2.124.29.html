<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USARTx SPI Write Function | Microchip Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            overflow: hidden;
            width: 280px;
        }

        .nav-frame {
            width: 100%;
            height: 100%;
            border: none;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .main {
            margin-left: 280px;
            padding: 20px;
        }

        .nav-link {
            color: #333;
            padding: .5rem 1rem;
        }

        .nav-link.active {
            background-color: #f8f9fa;
            font-weight: 500;
        }

        .parameters-table {
            width: 100%;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="sidebar">
                <iframe class="nav-frame" src="navigation.html" title="Navigation"></iframe>
            </nav>
            <main class="main">
<div class="doc-navigation">
    <a href="section_2.124.html">↑ Up to Section</a><br />
    <a href="index.html">↑↑ Back to Main Documentation</a>
</div>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="section_2.html">API Documentation</a></li>
        <li class="breadcrumb-item"><a href="section_2.124.html">Universal Synchronous Asynchronous Receiver Transceiver (USART)</a></li>
        <li class="breadcrumb-item active" aria-current="page">USARTx SPI Write Function</li>
    </ol>
</nav>

<h1>USARTx SPI Write Function</h1>
<h1>2.124.29</h1>
<p>USARTx_SPI_Write Function</p>
<p><em>Generated on: 2025-02-20 07:44:01</em></p>
<p>Source: <a href="https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-8F607879-A4FF-4B5E-A8EF-30522F184C25.html">https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-8F607879-A4FF-4B5E-A8EF-30522F184C25.html</a></p>
<h1><span id="2-124-29-usartx-spi-write-function"></span>2.124.29 USARTx_SPI_Write Function</h1>
<h2><span id="c"></span>C</h2>
<p>```C
/<em> x = USART SPI instance number </em>/</p>
<p>/<em> USART SPI master mode </em>/
bool USARTx_SPI_Write(void* pWrBuffer, size_t txSize)
```</p>
<h2><span id="summary"></span>Summary</h2>
<p>Writes data to SPI peripheral</p>
<h2><span id="description"></span>Description</h2>
<p>This function writes "txSize" number of bytes on SPI module. Data pointed by pWrBuffer is transmitted.  When interrupt is disabled, this function will be blocking in nature. In this mode, the function will not return until all the requested data is transferred. The function returns true after transferring all the data. This indicates that the operation has been completed.  When interrupt is enabled, the function will be non-blocking in nature. The function returns immediately. The data transfer process continues in the peripheral interrupt. The application specified transmit buffer is owned by the library until the data transfer is complete and should not be modified by the application till the transfer is complete. Only one transfer is allowed at any time. The application can use a callback function or a polling function to check for completion of the transfer. If a callback is required, this should be registered prior to calling the USARTx_SPI_Write() function. The application can use the USARTx_SPI_IsBusy() to poll for completion of transfer.</p>
<h2><span id="precondition"></span>Precondition</h2>
<p>The USARTx_SPI_Initialize function must have been called. Callback can be registered using USARTx_SPI_CallbackRegister API if the PLIB is configured in Interrupt mode and transfer completion status needs to be communicated back to application via callback.</p>
<h2><span id="parameters"></span>Parameters</h2>
<h3>Parameters</h3>
<table class="data-table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pWrBuffer</td>
<td>Pointer to the buffer containing the data which has to betransmitted. In "Interrupt Mode", this buffer should not be modified after calling the function and before the callback function has been called or the USARTx_SPI_IsBusy() function returns false.</td>
</tr>
<tr>
<td>txSize</td>
<td>Number of bytes to be transmitted. This value is the byte size of the buffer irrespective of 8/16/32 bit transfer mode.</td>
</tr>
</tbody>
</table>
<table class="data-table">
<thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pWrBuffer</td>
<td>Pointer to the buffer containing the data which has to betransmitted. In "Interrupt Mode", this buffer should not be modified after calling the function and before the callback function has been called or the USARTx_SPI_IsBusy() function returns false.</td>
</tr>
<tr>
<td>txSize</td>
<td>Number of bytes to be transmitted. This value is the byte size of the buffer irrespective of 8/16/32 bit transfer mode.</td>
</tr>
</tbody>
</table>
<h2><span id="returns"></span>Returns</h2>
<p>true - If configured for Non-interrupt mode, the function has transmitted the requested number of bytes. If configured for Interrupt mode, the request was accepted successfully and will be processed in the interrupt.</p>
<p>false - If pWrBuffer is NULL or txSize is 0. In Interrupt mode, the function will additionally return false if there is an on-going data transfer at the time of calling the function.</p>
<h2><span id="example"></span>Example</h2>
<p>```C
uint8_t txBuffer[4];
size_t txSize = 4;</p>
<p>void APP_SPITransferHandler(uintptr_t context)
{
    //Transfer was completed without error, do something else now.
}</p>
<p>USART1_SPI_Initialize();
USART1_SPI_CallbackRegister(&amp;APP_SPITransferHandler, (uintptr_t)NULL);
if(USART1_SPI_Write(&amp;txBuffer, txSize))
{
    // request got accepted
}
else
{
    // request didn't get accepted, try again later with correct arguments
}
```</p>
<h2><span id="remarks"></span>Remarks</h2>
<p>None</p>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>