<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QSPIx TransferSetup Function | Microchip Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            overflow: hidden;
            width: 280px;
        }

        .nav-frame {
            width: 100%;
            height: 100%;
            border: none;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .main {
            margin-left: 280px;
            padding: 20px;
        }

        .nav-link {
            color: #333;
            padding: .5rem 1rem;
        }

        .nav-link.active {
            background-color: #f8f9fa;
            font-weight: 500;
        }

        .parameters-table {
            width: 100%;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="sidebar">
                <iframe class="nav-frame" src="navigation.html" title="Navigation"></iframe>
            </nav>
            <main class="main">
<div class="doc-navigation">
    <a href="section_2.87.html">↑ Up to Section</a><br />
    <a href="index.html">↑↑ Back to Main Documentation</a>
</div>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="section_2.html">API Documentation</a></li>
        <li class="breadcrumb-item"><a href="section_2.87.html">Quad Serial Peripheral Interface (QSPI)</a></li>
        <li class="breadcrumb-item active" aria-current="page">QSPIx TransferSetup Function</li>
    </ol>
</nav>

<h1>QSPIx TransferSetup Function</h1>
<h1>2.87.7</h1>
<p>QSPIx_TransferSetup Function</p>
<p><em>Generated on: 2025-02-20 07:44:04</em></p>
<p>Source: <a href="https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-5036FEDC-4BB4-4C40-A4E8-AE2172B7A99A.html">https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-5036FEDC-4BB4-4C40-A4E8-AE2172B7A99A.html</a></p>
<h1><span id="2-87-7-qspix-transfersetup-function"></span>2.87.7 QSPIx_TransferSetup Function</h1>
<h2><span id="c"></span>C</h2>
<p>The prototype of QSPIx_TransferSetup() varies based on device family. Refer to the generated header file for the actual prototype to be used.</p>
<p>```C
// x - Instance of the QSPI peripheral</p>
<p>bool QSPIx_TransferSetup(QSPI_TRANSFER_SETUP *setup, uint32_t spiSourceClock);</p>
<p>bool QSPIx_TransferSetup(QSPI_TRANSFER_SETUP *setup);
```</p>
<h2><span id="summary"></span>Summary</h2>
<p>Setup QSPI operational parameters as desired by the client. This is used in SPI mode only.</p>
<h2><span id="description"></span>Description</h2>
<p>This function setup SPI x with the values needed by the client dynamically. Values passed through setup structure will be the new setup for SPI transmission. Even if user is not intending to modify all the setup parameters, he must update his setup structure with all its parameters.</p>
<p>If user do not update all the setup structure elements, then unexpected SPI behavior may occur.  User need not call this function if he has configured the setup in GUI and there is no dynamic change needed in any of the parameters.</p>
<h2><span id="precondition"></span>Precondition</h2>
<p>QSPI must first be initialized using QSPIx_Initialize().</p>
<h2><span id="parameters"></span>Parameters</h2>
<h3>Parameters</h3>
<table class="data-table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*setup</td>
<td>pointer to the data structure of type QSPI_TRANSFER_SETUP which has thelist of elements to be setup for a client.</td>
</tr>
<tr>
<td>spiSourceClock</td>
<td>Source Clock frequency in Hz on which QSPI module is running.</td>
</tr>
</tbody>
</table>
<table class="data-table">
<thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>*setup</td>
<td>pointer to the data structure of type QSPI_TRANSFER_SETUP which has thelist of elements to be setup for a client.</td>
</tr>
<tr>
<td>spiSourceClock</td>
<td>Source Clock frequency in Hz on which QSPI module is running.</td>
</tr>
</tbody>
</table>
<h2><span id="returns"></span>Returns</h2>
<p>true: if setup was successful</p>
<p>false: if qspiSourceClock and QSPI clock frequencies are such that resultant SCBR value is out of the possible range</p>
<ul>
<li>true: if setup was successful</li>
<li>false: if qspiSourceClock and QSPI clock frequencies are such that resultant SCBR value is out of the possible range</li>
</ul>
<h2><span id="example"></span>Example</h2>
<p>```C
QSPI_TRANSFER_SETUP setup;
setup.clockFrequency = 1000000;
setup.clockPhase = QSPI_CLOCK_PHASE_TRAILING_EDGE;
setup.clockPolarity = QSPI_CLOCK_POLARITY_IDLE_LOW;
setup.dataBits = QSPI_DATA_BITS_8;</p>
<p>// Assuming 150 MHz as peripheral Master clock frequency
if (QSPI0_TransferSetup(&amp;setup, 150000000) == false)
{
    // this means setup could not be done, debug the reason.
}
```</p>
<p>```C
QSPI_TRANSFER_SETUP setup;
setup.clockPhase = QSPI_CLOCK_PHASE_TRAILING_EDGE;
setup.clockPolarity = QSPI_CLOCK_POLARITY_IDLE_LOW;
setup.dataBits = QSPI_DATA_BITS_8;</p>
<p>// Assuming 150 MHz as peripheral Master clock frequency
if (QSPI0_TransferSetup(&amp;setup) == false)
{
    // this means setup could not be done, debug the reason.
}
```</p>
<h2><span id="remarks"></span>Remarks</h2>
<p>User need not call this function if he has configured the setup in GUI and there is no dynamic change needed in any of the parameters.</p>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>