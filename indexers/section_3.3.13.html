<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frequency Meter (FREQM) | Microchip Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            overflow: hidden;
            width: 280px;
        }

        .nav-frame {
            width: 100%;
            height: 100%;
            border: none;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        .main {
            margin-left: 280px;
            padding: 20px;
        }

        .nav-link {
            color: #333;
            padding: .5rem 1rem;
        }

        .nav-link.active {
            background-color: #f8f9fa;
            font-weight: 500;
        }

        .parameters-table {
            width: 100%;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="sidebar">
                <iframe class="nav-frame" src="navigation.html" title="Navigation"></iframe>
            </nav>
            <main class="main">
<div class="doc-navigation">
    <a href="section_3.3.html">↑ Up to Section</a><br />
    <a href="index.html">↑↑ Back to Main Documentation</a>
</div>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="section_3.html">Device Families</a></li>
        <li class="breadcrumb-item"><a href="section_3.3.html">PIC32CK SG GC Peripheral Libraries</a></li>
        <li class="breadcrumb-item active" aria-current="page">Frequency Meter (FREQM)</li>
    </ol>
</nav>

<h1>Frequency Meter (FREQM)</h1>
<h1>3.3.13</h1>
<p>Frequency Meter (FREQM)</p>
<p><em>Generated on: 2025-02-19 08:42:44</em></p>
<p>Source: <a href="https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-BA2BCF06-0941-4124-BD91-38DB404626FF.html">https://onlinedocs.microchip.com/oxy/GUID-450989FA-38E4-4D68-AB61-15ADB29AD718-en-US-5/GUID-BA2BCF06-0941-4124-BD91-38DB404626FF.html</a></p>
<h1>3.3.13 Frequency Meter (FREQM)</h1>
<p>The Frequency Meter (FREQM) can be used to accurately measure the
frequency of a clock by comparing it to a known reference clock.</p>
<h2>Using The Library</h2>
<p>AFEC converts all the enabled channels on software or hardware
triggers. It provides both polling and callback methods to indicate the
end of conversion to read the converted data from the result registers.</p>
<p>With polling, the application will need to continuously poll to
check if the conversion is completed.</p>
<p>With callback, the registered callback function will be called once
the conversion is completed. This means the application do not have to
poll continuously.</p>
<p>Callback method</p>
<p>This example demonstrates frequency measurement with callback.</p>
<p>Polling method</p>
<p>This example demonstrates frequency measurement with polling</p>
<p>```C
void AFEC_EventHandler(uintptr_t context)
{
    uint32_t frequencyInHertz;</p>
<pre class="code-block"><code class="language-c">if(FREQM_ErrorGet() == FREQM_ERROR_NONE)
{
    frequencyInHertz = FREQM_FrequencyGet();
}
</code></pre>
<p>}</p>
<p>int main(void)
{
    FREQM_CallbackRegister(&amp;FREQ_EventHandler,(uintptr_t)NULL);</p>
<pre class="code-block"><code class="language-c">FREQM_MeasurementStart();
</code></pre>
<p>}
```</p>
<p>```C
uint32_t frequencyInHertz;</p>
<p>/<em> Start Frequency Measurement </em>/
FREQM_MeasurementStart();</p>
<p>/<em> Wait for measurement completion </em>/
while(FREQM_IsBusy());</p>
<p>/<em> Read the result </em>/
if(FREQM_ErrorGet() == FREQM_ERROR_NONE)
{
    frequencyInHertz = FREQM_FrequencyGet();
}
```</p>
<ul>
<li>With polling, the application will need to continuously poll to
check if the conversion is completed.</li>
<li>With callback, the registered callback function will be called once
the conversion is completed. This means the application do not have to
poll continuously.</li>
</ul>
<h2>Library Interface</h2>
<p>Frequency Meter peripheral library provides the following interfaces:</p>
<p>Functions</p>
<p>Data types and constants</p>
<table class="data-table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>FREQM_Initialize</td>
<td>Initializes FREQM module</td>
</tr>
<tr>
<td>FREQM_MeasurementStart</td>
<td>This function starts the frequency measurement</td>
</tr>
<tr>
<td>FREQM_CallbackRegister</td>
<td>Allows application to register a callback function</td>
</tr>
<tr>
<td>FREQM_IsBusy</td>
<td>Returns the measurement status of an on-going frequency measurement operation</td>
</tr>
<tr>
<td>FREQM_FrequencyGet</td>
<td>Returns the measured frequency in Hz</td>
</tr>
<tr>
<td>FREQM_ErrorGet</td>
<td>Returns error that may have occurred during the frequency measurement process</td>
</tr>
</tbody>
</table>
<table class="data-table">
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>FREQM_ERROR</td>
<td>Enum</td>
<td>Identifies the possible FREQM module errors</td>
</tr>
<tr>
<td>FREQM_CALLBACK</td>
<td>Typedef</td>
<td>Pointer to a FREQM CallBack function</td>
</tr>
</tbody>
</table>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>